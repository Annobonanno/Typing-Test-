<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Typing Test</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to right, #f9f9f9, #d3e5ff);
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .container {
      background: white;
      padding: 40px;
      border-radius: 10px;
      max-width: 700px;
      width: 100%;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      text-align: center;
      border: 2px solid #d3e5ff;
    }
    h1 {
      margin-bottom: 10px;
      font-weight: 600;
      color: #3a86ff;
    }
    #quote {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 20px 0;
      font-size: 20px;
    }
    .char {
      padding: 2px 4px;
      border-bottom: 1px solid #ccc;
      white-space: pre;
    }
    .correct {
      background-color: #d4edda;
      color: green;
    }
    .incorrect {
      background-color: #f8d7da;
      color: red;
    }
    #results {
      margin-top: 20px;
      font-weight: bold;
    }
    textarea {
      position: absolute;
      opacity: 0;
    }
    #timer {
      font-weight: bold;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background-color: #3a86ff;
      color: white;
      border: none;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Typing Test</h1>
    <p id="timer">Time left: 60s</p>
    <p>Start typing the sentence below on your keyboard:</p>
    <div id="quote"></div>
    <div id="results"></div>
    <textarea id="input"></textarea>
    <button onclick="startTest()">Restart</button>
  </div>

  <script>
    const quotes = [
      "She once refused an employee maternity leave because she thought the baby was ugly and said, 'Why would she want to be at home with that thing?'",
      "You owe me 20 bucks. You know who you are.",
      "At a lesbian wedding, does the bride just throw a softball instead of a bouquet?",
      "Me fail English? That's unpossible.",
      "This anonymous clan of slack-jawed troglodytes has cost me the election. And yet, if I were to have them killed, I would be the one to go to jail. That's democracy for you.",
      "Have you ever tried turning off the computer and electrical devices, sitting down with your loving wife and children, and hitting them?"
    ];

    let currentQuote = '';
    let startTime;
    let timerInterval;
    let timeLeft = 60;

    const quoteEl = document.getElementById("quote");
    const inputEl = document.getElementById("input");
    const resultsEl = document.getElementById("results");
    const timerEl = document.getElementById("timer");

    document.addEventListener("keydown", function (e) {
      if (e.code === "Space" && e.target.tagName !== "TEXTAREA") {
        e.preventDefault();
      }
    });

    inputEl.addEventListener("input", () => {
      const input = inputEl.value;
      const quoteSpans = quoteEl.querySelectorAll(".char");
      let correct = 0;
      let completed = true;

      quoteSpans.forEach((span, index) => {
        const typedChar = input[index];
        if (typedChar == null) {
          span.classList.remove("correct", "incorrect");
          completed = false;
        } else if (typedChar === span.innerText) {
          span.classList.add("correct");
          span.classList.remove("incorrect");
          correct++;
        } else {
          span.classList.add("incorrect");
          span.classList.remove("correct");
          completed = false;
        }
      });

      if (input.length === currentQuote.length) {
        clearInterval(timerInterval);
        const elapsed = (new Date().getTime() - startTime) / 1000;
        const words = currentQuote.trim().split(/\s+/).length;
        const wpm = Math.round((words / elapsed) * 60);
        const accuracy = Math.round((correct / currentQuote.length) * 100);
        resultsEl.innerText = `You typed at ${wpm} WPM with ${accuracy}% accuracy!`;
        inputEl.disabled = true;
      }
    });

    function startTest() {
      clearInterval(timerInterval);
      inputEl.value = '';
      inputEl.disabled = false;
      inputEl.focus();
      resultsEl.innerText = '';

      const quote = quotes[Math.floor(Math.random() * quotes.length)];
      currentQuote = quote;
      quoteEl.innerHTML = '';

      quote.split('').forEach(char => {
        const span = document.createElement('span');
        span.innerText = char;
        span.classList.add('char');
        quoteEl.appendChild(span);
      });

      timeLeft = 60;
      timerEl.innerText = `Time left: ${timeLeft}s`;
      startTime = new Date().getTime();

      timerInterval = setInterval(() => {
        timeLeft--;
        timerEl.innerText = `Time left: ${timeLeft}s`;

        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          inputEl.disabled = true;
          const quoteSpans = quoteEl.querySelectorAll(".char");
          let correct = 0;
          quoteSpans.forEach((span, index) => {
            if (inputEl.value[index] === span.innerText) {
              correct++;
            }
          });
          const accuracy = Math.round((correct / currentQuote.length) * 100);
          resultsEl.innerText = `Time's up! Accuracy: ${accuracy}%`;
        }
      }, 1000);
    }

    window.onload = startTest;
  </script>
</body>
</html>
